<apex:page >
    <apex:includeScript value="https://code.jquery.com/jquery-1.11.2.min.js" />
    <apex:includeScript value="{!URLFOR($Resource.forcetk, '/Force.com-JavaScript-REST-Toolkit-master/forcetk.js')}"  />
    
    
    <script type="text/javascript">
		// Get an instance of the REST API client and set the session ID
		var client = new forcetk.Client();
    client.setSessionToken('{!$Api.Session_ID}');
    
    
    /*client.query("SELECT Name FROM Account LIMIT 1", function(response){
            $('#accountname').text(response.records[0].Name);
        });*/
    
    function upload() {
        var file = $("#file")[0].files[0];
        console.log(file);
        client.createBlob('ContentVersion', {
            Origin: 'H', // 'H' for Chatter File, 'C' for Content Document
            PathOnClient: file.name
        }, file.name, 'VersionData', file, function(response){
            console.log(response);
            $("#message").html("Chatter File created: <a target=\"_blank\" href=\"/" + response.id + "\">Take a look!</a>");
        }, function(request, status, response){
            $("#message").html("Error: " + status);
        });
    }
        
    </script>
    
   
    <h3>
        Select a file to upload as a new Chatter File.
    </h3>
    <input type="file" id="file" onchange="upload()"/>
    <p id="message"></p>
</apex:page>